---
title: Gateway 3.12.0
---

# Gateway 3.12.0

- [Breaking changes](#breaking-changes)
  - [Rename of the Virtual Cluster Id](#rename-of-virtual-cluster-id)
- [New features](#new-features)
  - [Enhanced Crypto Shredding behavior for Decryption](#enhanced-crypto-shredding-behavior-for-decryption)
  - [Client Throttling for Encryption/Decryption](#client-throttling-for-encryptiondecryption)

### Breaking changes

#### New APIs for health and versions

To improve the reliability and monitoring of the Gateway service, we've introduced new API endpoints for health checks and version information.

These changes align our service with Kubernetes health check standards and will provide a more robust way to monitor Gateway's status.

[Find out more from the monitoring reference](/guide/conduktor-in-production/monitor/index#liveness-endpoint).

<Warning>
The old */health* API is now deprecated but it will continue to function. 

Please update your configuration to use the new liveness and readiness probe endpoints.
</Warning>

#### Configuration key change for Vault KUBERNETES authentication type

The [Vault KUBERNETES authentication type](https://developer.hashicorp.com/vault/docs/agent-and-proxy/autoauth/methods/kubernetes#token_path) has been corrected to read the token from a file in the running pod.

Because of this, Kubernetes authentication's configuration key `jwt` (`VAULT_KUBERNETES_JWT`) was changed to `path` (`VAULT_KUBERNETES_PATH`). 

This *optional* configuration contains the path of the file containing the token. It defaults to `/var/run/secrets/kubernetes.io/serviceaccount/token` following the Vault documentation.

#### Rename of Virtual Cluster Id

When a Kafka client requests the cluster Id of a Virtual Cluster through Gateway, the returned cluster Id will be different - it will be renamed.

Previously, the returned cluster Id was the native Kafka cluster Id of the Virtual Cluster's physical cluster.

The new cluster Id that's returned will be be in the form of: `{virtual-cluster-name}@{physical-cluster-id}`.

### New features

#### New `GATEWAY_AUDIT_LOG_EVENT_TYPES` environment variable

This release introduces the `GATEWAY_AUDIT_LOG_EVENT_TYPES` environment variable which controls the types of events recorded in the audit log.

It provides flexibility to enable/disable specific event types, such as `CONNECTION`. 

[See the full list and explanations of the event types](/guide/conduktor-in-production/deploy-artifacts/deploy-gateway/env-variables#audit).

This change is backwards compatible, as the default value is `ALL` (which means that all event types are logged by default).

#### Enhanced Crypto Shredding behavior for Decryption
The Decryption Interceptor now includes improved error handling behavior specifically for Crypto Shredding scenarios.

When using KMS types that support crypto shredding (Vault, AWS, GCP, Azure, Gateway), the plugin automatically overrides the configured `errorPolicy` when encryption keys are missing. In these cases, the plugin will always return encrypted data regardless of the configured policy, ensuring consumers don't become permanently blocked by deliberately un-decryptable messages.

#### Client Throttling for Encryption/Decryption

- **New throttleTimeMs configuration**: Added support for client throttling when encryption or decryption fails
- **Configurable throttling behavior**: Set `throttleTimeMs` to control the duration of client throttling in milliseconds (default: 0)
- **Smart exception handling**:
  - For `RetryableException`: Returns `NetworkException` with throttle time
  - For other exceptions (like `FatalException`): Returns `PolicyViolationException` without throttling
- **System protection**: Helps prevent overwhelming the system during encryption failures by automatically throttling clients

[Find out more about encryption and decryption configurations](/gateway/interceptors/data-security/encryption/).