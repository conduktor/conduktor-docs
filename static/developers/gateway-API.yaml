info:
  title: Gateway API
  version: /v1
  contact:
    email: contact@conduktor.io
    name: Contact Conduktor
    url: https://docs.conduktor.io
  x-logo:
    altText: Conduktor logo
    backgroundColor: "#FFFFFF"
    href: https://docs.conduktor.io
    url: https://www.conduktor.io/svgs/logo/black.svg
    description: API routes to administer Conduktor Gateway.
tags:
  - name: Introduction
    description: Conduktor Gateway enables you to enhance your Kafka experience without changing your applications.
  - name: Auth
    description: APIs to manage broker authentication.
  - name: Clusters
    description: APIs to perform operations on clusters within Conduktor Gateway.
  - name: Interceptor
    description: APIs to manage interceptors within Conduktor Gateway
  - name: Plugins
    description: APIs to interact with plugins within Conduktor Gateway.
servers:
  - url: "/admin"
paths:
  "/auth/v1/platformRbac/cluster/{clusterId}":
    post:
      summary: Create credentials for a Conduktor Console user for RBAC
      tags:
        - Auth
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The cluster to create the credentials for.
      requestBody:
        content:
          application/json:
            example:
              organization: conduktor
              user: user@conduktor.io
              cluster: my-cluster
              lifeTimeSeconds: 7776000
            schema:
              "$ref": "#/components/schemas/RbacTokenRequest"
        required: true
      responses:
        '200':
          description: Cluster token
          content:
            application/json:
              example:
                token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
              schema:
                "$ref": "#/components/schemas/TenantToken"
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Cluster doesn't exist. 
          content: {}
      security:
        - basicAuth: []
      operationId: Auth_v1_createPlatformRbacToken
      deprecated: false
  "/auth/v1/cluster/{clusterId}/account/{account}":
    post:
      summary: Create account credentials for a specific cluster
      tags:
        - Auth
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster where the account will be created against.
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: The account to create the credentials for.
      requestBody:
        content:
          application/json:
            example:
              lifeTimeSeconds: 7776000
            schema:
              "$ref": "#/components/schemas/TenantTokenRequest"
        required: true
      responses:
        '200':
          description: Account token
          content:
            application/json:
              example:
                token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
              schema:
                "$ref": "#/components/schemas/TenantToken"
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: cluster doesn't exist. 
          content: {}
      security:
        - basicAuth: []
      operationId: Auth_v1_createClusterAccountToken
      deprecated: false
  "/clusters/v1/":
    get:
      summary: List clusters
      tags:
        - Clusters
      parameters: []
      responses:
        '200':
          description: List of cluster ids with topic mappings
          content:
            application/json:
              example:
                tenants:
                  - cluster1
                  - cluster2
              schema:
                "$ref": "#/components/schemas/ClusterList"
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
      security:
        - basicAuth: []
      operationId: Clusters_v1_listClusters
      deprecated: false
  "/clusters/v1/cluster/{clusterId}/topics":
    delete:
      summary: Delete all topic mappings for a cluster
      tags:
        - Clusters
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to delete topics for
      responses:
        '200':
          description: cluster topic mappings deleted
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Cluster doesn't have any topic mappings
          content: {}
      security:
        - basicAuth: []
      operationId: Clusters_v1_deleteClusters
      deprecated: false
    get:
      summary: List topic mappings for a cluster
      tags:
        - Clusters
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to list topic mappings for
      responses:
        '200':
          description: List of the topic mappings with their configuration
          content:
            application/json:
              example:
                - logicalTopicName: topic1
                  physicalTopicName: realTopic
                  readOnly: true
                  concentrated: false
                - logicalTopicName: topic2
                  physicalTopicName: realTopic2
                  readOnly: false
                  concentrated: true
              schema:
                items:
                  "$ref": "#/components/schemas/TopicMapping"
                example:
                  - logicalTopicName: topic1
                    physicalTopicName: realTopic
                    readOnly: true
                    concentrated: false
                  - logicalTopicName: topic2
                    physicalTopicName: realTopic2
                    readOnly: false
                    concentrated: true
                type: array
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Cluster doesn't have any topic mappings defined
          content: {}
      security:
        - basicAuth: []
      operationId: Clusters_v1_listClusterTopicMapping
      deprecated: false
  "/clusters/v1/cluster/{clusterId}/topics/{logicalTopicName}":
    delete:
      summary: Delete a topic mapping for a cluster
      description: Delete targeted topic mapping for a cluster. If this API call is
        deleting the last topic mapping registered for a cluster, the cluster will not
        be visible anymore after deletion in the multi-tenancy API.
      tags:
        - Clusters
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to delete a topic mapping for
        - schema:
            type: string
          in: path
          name: logicalTopicName
          required: true
          description: The logical topic name to delete the topic mapping for
      responses:
        '200':
          description: Topic mapping deleted
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Topic (logical topic name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Clusters_v1_deleteClusterTopicMapping
      deprecated: false
    post:
      summary: Create topic mapping for a cluster
      tags:
        - Clusters
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to create a topic mapping for
        - schema:
            type: string
          in: path
          name: logicalTopicName
          required: true
          description: Topic name to expose
      requestBody:
        content:
          application/json:
            example:
              physicalTopicName: realTopic
              readOnly: true
              concentrated: false
            schema:
              "$ref": "#/components/schemas/TopicMappingRequest"
        required: true
      responses:
        '200':
          description: Topic mapping created
          content:
            application/json:
              example:
                logicalTopicName: logicalTopicName
                physicalTopicName: realTopic
                readOnly: true
                concentrated: false
              schema:
                "$ref": "#/components/schemas/TopicMapping"
        '400':
          description: If physicalTopicName is not existing on backend cluster
          content:
            application/json:
              example:
                message: Physical topic named realTopic does not exist in your kafka
                  cluster
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '409':
          description: Invalid update detected. RealTopicName cannot be updated
          content:
            application/json:
              example:
                message: You can't update the physicalTopicName for an existing topic
                  mapping.
        '503':
          description: Error when calling backend kafka to verify physical topic
          content:
            application/json:
              example:
                message: Error when calling backend kafka to verify if topic named
                  realTopic exists
      security:
        - basicAuth: []
      operationId: Clusters_v1_createClusterTopicMapping
      deprecated: false
  "/clusters/v1/rerouting/{fromCluster}/{toCluster}":
    post:
      summary: Reroute all mappings from a cluster to another
      tags:
        - Clusters
      parameters:
        - schema:
            type: string
          in: path
          name: fromCluster
          required: true
          description: Cluster id to switch from
        - schema:
            type: string
          in: path
          name: toCluster
          required: true
          description: Cluster id to switch to
      responses:
        '200':
          description: Cluster switched
          content: { }
        '400':
          description: Bad parameter. A cluster id is not configured
          content: { }
        '401':
          description: ''
          content: { }
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
      security:
        - basicAuth: [ ]
      operationId: Clusters_v1_clusterRerouting
      deprecated: false
  "/interceptors/v1/cluster/{clusterId}/interceptor/{interceptorName}":
    post:
      summary: Create an interceptor for a cluster
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to create an interceptor for
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name
      requestBody:
        content:
          application/json:
            example:
              pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
              priority: 50
              config:
                topic: topicName
            schema:
              "$ref": "#/components/schemas/InterceptorRequest"
        required: true
      responses:
        '200':
          description: Interceptor created
          content: {}
        '400':
          description: If bad config, bad priority and bad class name
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '409':
          description: Invalid update detected. cluster + interceptorName must be unique.
          content:
            application/json:
              example:
                message: interceptorName for cluster must be unique.
      security:
        - basicAuth: []
      operationId: Interceptor_v1_createClusterInterceptor
      deprecated: false
    put:
      summary: Update an interceptor for a cluster
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to update an interceptor for
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name for update
      requestBody:
        content:
          application/json:
            example:
              pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
              priority: 50
              config:
                topic: topicName
            schema:
              "$ref": "#/components/schemas/InterceptorRequest"
        required: true
      responses:
        '200':
          description: Interceptor updated
          content: {}
        '400':
          description: If bad config, bad priority and bad class name
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_updateClusterInterceptor
      deprecated: false
    get:
      summary: Get info on an interceptor for a cluster
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to get information on an interceptor for
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name to get information on
      responses:
        '200':
          description: Interceptor updated
          content:
            application/json:
              example:
                name: myEncryptionInterceptor
                pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                priority: 50
                config:
                  topic: topicName
              schema:
                "$ref": "#/components/schemas/InterceptorResponse"
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_getClusterInterceptor
      deprecated: false
    delete:
      summary: Delete an interceptor for a cluster
      description: Delete an interceptor for a cluster
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to delete an interceptor for
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: The name of the interceptor to delete
      responses:
        '200':
          description: Interceptor deleted
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_deleteClustertInterceptor
      deprecated: false
  "/interceptors/v1/cluster/{clusterId}/interceptors":
    get:
      summary: Get interceptors of a cluster
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to get interceptors
      responses:
        '200':
          description: Interceptor list
          content:
            application/json:
              example:
                - name: myEncryptionInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                  priority: 50
                  config:
                    topic: topicName
                - name: myInjectHeaderInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                  priority: 51
                  config:
                    topic: topicName
              schema:
                items:
                  "$ref": "#/components/schemas/InterceptorResponse"
                example:
                  - name: myEncryptionInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                    priority: 50
                    config:
                      topic: topicName
                  - name: myInjectHeaderInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                    priority: 51
                    config:
                      topic: topicName
                type: array
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_getClusterInterceptors
      deprecated: false
  "/interceptors/v1/cluster/{clusterId}/account/{account}/interceptor/{interceptorName}":
    post:
      summary: Create interceptor for a user
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to create an interceptor for
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: the account to get interceptors
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name
      requestBody:
        content:
          application/json:
            example:
              pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
              priority: 50
              config:
                topic: topicName
            schema:
              "$ref": "#/components/schemas/InterceptorRequest"
        required: true
      responses:
        '200':
          description: Interceptor created
          content: {}
        '400':
          description: If bad config, bad priority and bad class name
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '409':
          description: Invalid update detected. cluster + interceptorName must be unique.
          content:
            application/json:
              example:
                message: interceptorName for cluster must be unique.
      security:
        - basicAuth: []
      operationId: Interceptor_v1_createAccountInterceptor
      deprecated: false
    put:
      summary: Update interceptor for a user
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to update an interceptor for
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: the account to get interceptors
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name to update
      requestBody:
        content:
          application/json:
            example:
              pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
              priority: 50
              config:
                topic: topicName
            schema:
              "$ref": "#/components/schemas/InterceptorRequest"
        required: true
      responses:
        '200':
          description: Interceptor updated
          content: {}
        '400':
          description: If bad config, bad priority and bad class name
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_updateAccountInterceptor
      deprecated: false
    get:
      summary: Get an interceptor for a user
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to create an interceptor for
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: the account to get interceptors
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: Interceptor name to get data
      responses:
        '200':
          description: Interceptor updated
          content:
            application/json:
              example:
                name: myEncryptionInterceptor
                pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                priority: 50
                config:
                  topic: topicName
              schema:
                "$ref": "#/components/schemas/InterceptorResponse"
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_getAccountInterceptor
      deprecated: false
    delete:
      summary: Delete an interceptor for a user
      description: Delete an interceptor for a user.
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to delete an interceptor from
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: the account to delete interceptors from
        - schema:
            type: string
          in: path
          name: interceptorName
          required: true
          description: The interceptor name to delete
      responses:
        '200':
          description: Interceptor deleted
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: Interceptor (interceptor name) or cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_deleteAccountInterceptor
      deprecated: false
  "/interceptors/v1/cluster/{clusterId}/account/{account}/interceptors":
    get:
      summary: Get interceptors of a user
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: path
          name: clusterId
          required: true
          description: The id of the cluster to get interceptors for
        - schema:
            type: string
          in: path
          name: account
          required: true
          description: the account to get interceptors for
      responses:
        '200':
          description: Interceptor list
          content:
            application/json:
              example:
                - name: myEncryptionInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                  priority: 50
                  config:
                    topic: topicName
                - name: myInjectHeaderInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                  priority: 51
                  config:
                    topic: topicName
              schema:
                items:
                  "$ref": "#/components/schemas/InterceptorResponse"
                example:
                  - name: myEncryptionInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                    priority: 50
                    config:
                      topic: topicName
                  - name: myInjectHeaderInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                    priority: 51
                    config:
                      topic: topicName
                type: array
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_getAccountInterceptors
      deprecated: false
  "/interceptors/v1/interceptors":
    get:
      summary: Get all interceptors (cluster and global interceptors)
      tags:
        - Interceptor
      parameters:
        - schema:
            type: string
          in: query
          name: pluginClass
          required: false
          description: Interceptor plugin class name to filter the data
      responses:
        '200':
          description: Interceptor list
          content:
            application/json:
              example:
                - tenant: ''
                  name: myEncryptionInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                  priority: 50
                  config:
                    topic: topicName
                - tenant: tenant1
                  name: myInjectHeaderInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                  priority: 51
                  config:
                    topic: topicName
                - tenant: tenant1
                  user: user1
                  name: myInjectHeaderInterceptor
                  pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                  priority: 51
                  config:
                    topic: topicName
              schema:
                items:
                  "$ref": "#/components/schemas/InterceptorWithClusterResponse"
                example:
                  - tenant: ''
                    name: myEncryptionInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
                    priority: 50
                    config:
                      topic: topicName
                  - tenant: tenant1
                    name: myInjectHeaderInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                    priority: 51
                    config:
                      topic: topicName
                  - tenant: tenant1
                    user: user1
                    name: myInjectHeaderInterceptor
                    pluginClass: io.conduktor.gateway.interceptor.DynamicHeaderInjectionPlugin
                    priority: 51
                    config:
                      topic: topicName
                type: array
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
        '404':
          description: cluster not found
          content: {}
      security:
        - basicAuth: []
      operationId: Interceptor_v1_getInterceptors
      deprecated: false
  "/plugins/v1":
    get:
      summary: List all the available plugins
      tags:
        - Plugins
      responses:
        '200':
          description: List all available plugins
          content:
            application/json:
              example:
                plugins: [io.conduktor.gateway.interceptor.AlterBrokerConfigsSafeGuardPlugin,
                           io.conduktor.gateway.interceptor.AlterTopicConfigsSafeGuardPlugin
                           ]
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
      security:
        - basicAuth: []
      operationId: Plugins_v1_getPlugins
      deprecated: false
  "/plugins/v1/extended":
    get:
      summary: Get all available plugins with extended information
      tags:
        - Plugins
      responses:
        '200':
          description: List all available plugins with extended information
          content:
            application/json:
              example:
                plugins: [
                  {
                    "plugin": "io.conduktor.gateway.interceptor.chaos.SimulateSlowProducersConsumersPlugin",
                    "pluginId": "io.conduktor.gateway.interceptor.chaos.SimulateSlowProducersConsumersPlugin",
                    "tags": {
                      "parent": "Console",
                      "license": "enterprise",
                      "description": "Validate your application behaves correctly when broker errors occur.",
                      "title": "Broker errors",
                      "version": "1.0.1-SNAPSHOT"
                    },
                    "readme": "---\nversion: 1.0.1-SNAPSHOT\ntitle: Broker errors\ndescription: Validate your application behaves correctly when broker errors occur.\nparent: chaos\nlicense: enterprise\n---\n\n## What is Broken broker chaos?\n\nThis interceptor inject intermittent errors in client connections to brokers that are consistent with broker side  issues. \n\nThis only works on Produce requests and Fetch requests.\n\n## Configuration\n\n| config        | type | description                                                                                                                                                                     |\n|:--------------|------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| rateInPercent | int  | The percentage of requests that will result in a broker not available response                                                                                                  |\n| errorMap      | Map  | Map of ApiKeys and Error you want to response, not required.Default errorMap when errorMap is not configured:FETCH: UNKNOWN_SERVER_ERRORPRODUCE: CORRUPT_MESSAGE |\n\n## Possible Error for Api Key\n\n### [FETCH](https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/requests/FetchResponse.java#L48-L65):\n\n- OFFSET_OUT_OF_RANGE\n- TOPIC_AUTHORIZATION_FAILED\n- REPLICA_NOT_AVAILABLE\n- NOT_LEADER_OR_FOLLOWER\n- FENCED_LEADER_EPOCH\n- UNKNOWN_LEADER_EPOCH\n- UNKNOWN_TOPIC_OR_PARTITION\n- KAFKA_STORAGE_ERROR\n- UNSUPPORTED_COMPRESSION_TYPE\n- CORRUPT_MESSAGE\n- UNKNOWN_TOPIC_ID\n- FETCH_SESSION_TOPIC_ID_ERROR,\n- INCONSISTENT_TOPIC_ID,\n- UNKNOWN_SERVER_ERROR\n\n### [PRODUCE](https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/requests/ProduceResponse.java#L39-L53):\n\n- CORRUPT_MESSAGE,\n- UNKNOWN_TOPIC_OR_PARTITION,\n- NOT_LEADER_OR_FOLLOWER,\n- INVALID_TOPIC_EXCEPTION,\n- RECORD_LIST_TOO_LARGE,\n- NOT_ENOUGH_REPLICAS,\n- NOT_ENOUGH_REPLICAS_AFTER_APPEND,\n- INVALID_REQUIRED_ACKS,\n- TOPIC_AUTHORIZATION_FAILED,\n- UNSUPPORTED_FOR_MESSAGE_FORMAT,\n- INVALID_PRODUCER_EPOCH,\n- CLUSTER_AUTHORIZATION_FAILED,\n- TRANSACTIONAL_ID_AUTHORIZATION_FAILED,\n- INVALID_RECORD\n\n## Example\n\n```yaml\n    name: myBrokenBrokerChaosInterceptor\n    pluginClass: io.conduktor.gateway.interceptor.BrokenBrokerChaosPlugin\n    priority: 100\n    config:\n      - key: rateInPercent\n        value: 100\n      - key: errorMap\n        value:\n          FETCH: UNKNOWN_SERVER_ERROR\n          PRODUCE: CORRUPT_MESSAGE\n```"
                  }
                ]
        '400':
          description: If bad request
          content: {}
        '401':
          description: ''
          content: {}
        '403':
          description: Permission not granted
          content:
            application/json:
              example:
                message: User doesn't have permission. Please contact your administrator
      security:
        - basicAuth: []
      operationId: Plugins_v1_getPluginsExtended
      deprecated: false
components:
  schemas:
    TenantToken:
      properties:
        token:
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
          type: string
      example:
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
      type: object
      required:
        - token
    TenantTokenRequest:
      properties:
        lifeTimeSeconds:
          example: 7776000
          format: int64
          type: integer
      example:
        lifeTimeSeconds: 7776000
      type: object
      required:
        - lifeTimeSeconds
    RbacTokenRequest:
      properties:
        organization:
          example: conduktor
          type: string
        user:
          example: user@conduktor.io
          type: string
        cluster:
          example: my-cluster
          type: string
        lifeTimeSeconds:
          example: 7776000
          format: int64
          type: integer
      example:
        organization: conduktor
        user: user@conduktor.io
        cluster: my-cluster
        lifeTimeSeconds: 7776000
      type: object
      required:
        - cluster
        - lifeTimeSeconds
        - organization
        - user
    ClusterList:
      properties:
        tenants:
          items:
            type: string
          example:
            - cluster1
            - cluster2
          type: array
      example:
        tenants:
          - cluster1
          - cluster2
      type: object
      required:
        - clusters
    TopicMapping:
      properties:
        logicalTopicName:
          example: logicalTopicName
          type: string
        physicalTopicName:
          example: realTopic
          type: string
        readOnly:
          example: true
          type: boolean
        concentrated:
          example: true
          type: boolean
      example:
        logicalTopicName: logicalTopicName
        physicalTopicName: realTopic
        readOnly: true
        concentrated: false
      type: object
      required:
        - logicalTopicName
        - physicalTopicName
        - readOnly
        - concentrated
    TopicMappingRequest:
      properties:
        physicalTopicName:
          example: realTopic
          type: string
        readOnly:
          example: true
          type: boolean
        concentrated:
          example: true
          type: boolean
      example:
        physicalTopicName: realTopic
        readOnly: true
        concentrated: false
      type: object
      required:
        - physicalTopicName
        - readOnly
        - concentrated
    InterceptorRequest:
      properties:
        pluginClass:
          example: io.conduktor.gateway.interceptor.EncryptPlugin
          type: string
        priority:
          example: 50
          type: integer
        config:
          type: object
      example:
        pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
        priority: 50
        config:
          topic: topicName
      type: object
      required:
        - pluginClass
        - priority
        - config
    InterceptorResponse:
      properties:
        name:
          example: myEncryptionInterceptor
          type: string
        pluginClass:
          example: io.conduktor.gateway.interceptor.EncryptPlugin
          type: string
        priority:
          example: 50
          type: integer
        config:
          type: object
      example:
        name: myEncryptionInterceptor
        pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
        priority: 50
        config:
          topic: topicName
      type: object
      required:
        - name
        - pluginClass
        - priority
        - config
    InterceptorWithClusterResponse:
      properties:
        tenant:
          example: cluster1
          type: string
        user:
          example: user1
          type: string
        name:
          example: myEncryptionInterceptor
          type: string
        pluginClass:
          example: io.conduktor.gateway.interceptor.EncryptPlugin
          type: string
        priority:
          example: 50
          type: integer
        config:
          type: object
      example:
        tenant: tenant1
        user: user1
        name: myEncryptionInterceptor
        pluginClass: io.conduktor.gateway.interceptor.EncryptPlugin
        priority: 50
        config:
          topic: topicName
      type: object
      required:
        - tenant
        - name
        - pluginClass
        - priority
        - config
  securitySchemes:
    basicAuth:
      scheme: basic
      type: http
openapi: 3.0.0
